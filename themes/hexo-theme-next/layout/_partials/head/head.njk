<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta http-equiv="Permissions-Policy" content="accelerometer=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=(), encrypted-media=()">
{%- if theme.darkmode %}
<meta name="theme-color" content="{{ theme.theme_color.light }}" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="{{ theme.theme_color.dark }}" media="(prefers-color-scheme: dark)">
{%- else %}
<meta name="theme-color" content="{{ theme.theme_color.light }}">
{%- endif %}
{%- if config.meta_generator %}
  {{- meta_generator() }}
{%- endif %}

{%- if theme.preconnect %}
  <link rel="preload" href="{{ url_for(theme.css) }}/main.css" as="style">
  <!-- é¢„è¿æ¥åˆ°å¤–éƒ¨èµ„æºä»¥æé«˜åŠ è½½é€Ÿåº¦ -->
  <link rel="preconnect" href="//fonts.loli.net" crossorigin>
  <link rel="preconnect" href="//music.163.com" crossorigin>
  <link rel="preconnect" href="//cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="//busuanzi.ibruce.info" crossorigin>
  <link rel="dns-prefetch" href="//fonts.loli.net">
  <link rel="dns-prefetch" href="//music.163.com">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="//busuanzi.ibruce.info">
{%- endif %}
{{ next_pre() }}

{%- if theme.favicon.apple_touch_icon %}
  <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for(theme.favicon.apple_touch_icon) }}">
{%- endif %}
{%- if theme.favicon.medium %}
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for(theme.favicon.medium) }}">
{%- endif %}
{%- if theme.favicon.small %}
  <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for(theme.favicon.small) }}">
{%- endif %}
{%- if theme.favicon.safari_pinned_tab %}
  <link rel="mask-icon" href="{{ url_for(theme.favicon.safari_pinned_tab) }}" color="{{ theme.theme_color.light }}">
{%- endif %}
{%- if theme.favicon.android_manifest %}
  <link rel="manifest" href="{{ url_for(theme.favicon.android_manifest) }}">
{%- endif %}

{%- if theme.google_site_verification %}
  <meta name="google-site-verification" content="{{ theme.google_site_verification }}">
{%- endif %}
{%- if theme.bing_site_verification %}
  <meta name="msvalidate.01" content="{{ theme.bing_site_verification }}">
{%- endif %}
{%- if theme.yandex_site_verification %}
  <meta name="yandex-verification" content="{{ theme.yandex_site_verification }}">
{%- endif %}
{%- if theme.baidu_site_verification %}
  <meta name="baidu-site-verification" content="{{ theme.baidu_site_verification }}">
{%- endif %}

<link rel="stylesheet" href="{{ url_for(theme.css) }}/main.css">

{{ next_font() }}

{{ next_vendors('fontawesome') }}

{%- if theme.motion.enable %}
  {{ next_vendors('animate_css') }}
{%- endif %}

{%- if theme.fancybox %}
  {{ next_vendors('fancybox_css') }}
{%- endif %}

{%- if theme.pace.enable %}
  {{ next_vendors('pace_css') }}
  {{ next_vendors('pace_js') }}
{%- endif %}

{{ next_data('main', next_config()) }}
{{- next_js('config.js') }}

<!-- è‡ªå®šä¹‰ Live Reload for Development -->
<script>
(function() {
  'use strict';
  
  // ä»…åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­å¯ç”¨
  if (typeof window !== 'undefined' && 
      (window.location.hostname === 'localhost' || 
       window.location.hostname === '127.0.0.1')) {
    
    console.log('ğŸ”„ Initializing Smart Live Reload for development...');
    
    let lastPageHash = null;
    let checkCount = 0;
    let isChecking = false;
    let stableCount = 0;
    let initialized = false;
    let currentUrl = window.location.href;
    let checkInterval = null;
    let urlChangeDetected = false;
    
    // ç”Ÿæˆé¡µé¢å†…å®¹å“ˆå¸Œï¼ˆæ’é™¤åŠ¨æ€å…ƒç´ ï¼‰
    function generatePageHash(htmlContent) {
      try {
        // ç§»é™¤å¯èƒ½å˜åŒ–çš„åŠ¨æ€å†…å®¹
        let cleanHtml = htmlContent;
        
        // ç§»é™¤æ—¶é—´æˆ³ã€è®¿é—®ç»Ÿè®¡ç­‰åŠ¨æ€å†…å®¹çš„æ­£åˆ™
        const dynamicPatterns = [
          /\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/g,  // ISOæ—¶é—´æˆ³
          /\d{4}\/\d{2}\/\d{2}/g,                   // æ—¥æœŸæ ¼å¼
          /\d{2}:\d{2}:\d{2}/g,                     // æ—¶é—´æ ¼å¼
          /<script[^>]*>[\s\S]*?<\/script>/gi,      // æ‰€æœ‰scriptæ ‡ç­¾
          /busuanzi_value_\w+/g,                    // ä¸è’œå­ç»Ÿè®¡
          /leancloud_visitors/g,                    // LeanCloudè®¿é—®ç»Ÿè®¡
          /live2d-widget/g,                         // Live2D
          /persistent-music-player/g,               // éŸ³ä¹æ’­æ”¾å™¨
          /hexo-neat/g                              // hexo-neat å‹ç¼©æ ‡è®°
        ];
        
        dynamicPatterns.forEach(function(pattern) {
          cleanHtml = cleanHtml.replace(pattern, '');
        });
        
        // ç®€å•å“ˆå¸Œå‡½æ•°
        let hash = 0;
        for (let i = 0; i < cleanHtml.length; i++) {
          const char = cleanHtml.charCodeAt(i);
          hash = ((hash << 5) - hash) + char;
          hash = hash & hash; // è½¬æ¢ä¸º32ä½æ•´æ•°
        }
        
        return hash.toString();
      } catch (error) {
        console.log('âš ï¸ Error generating page hash:', error);
        return Math.random().toString();
      }
    }
    
    // æ£€æµ‹URLå˜åŒ–
    function checkUrlChange() {
      const newUrl = window.location.href;
      if (newUrl !== currentUrl) {
        console.log('ğŸ”— URL changed detected!');
        console.log('ğŸ“ From:', currentUrl);
        console.log('ğŸ“ To:', newUrl);
        
        // é‡ç½®çŠ¶æ€ä»¥é€‚åº”æ–°é¡µé¢
        currentUrl = newUrl;
        lastPageHash = null;
        initialized = false;
        stableCount = 0;
        urlChangeDetected = true;
        
        // URLå˜åŒ–åå»¶è¿Ÿé‡æ–°åˆå§‹åŒ–ï¼Œé¿å…è¯¯è§¦å‘åˆ·æ–°
        setTimeout(function() {
          urlChangeDetected = false;
          console.log('ğŸ”„ Reinitializing Live Reload for new page...');
          checkForUpdates();
        }, 2000);
        
        return true;
      }
      return false;
    }
    
    function checkForUpdates() {
      // æ£€æŸ¥URLæ˜¯å¦å˜åŒ–
      if (checkUrlChange()) {
        return;
      }
      
      // å¦‚æœåˆšåˆšæ£€æµ‹åˆ°URLå˜åŒ–ï¼Œè·³è¿‡è¿™æ¬¡æ£€æŸ¥
      if (urlChangeDetected) {
        console.log('â­ï¸ Skipping check due to recent URL change...');
        return;
      }
      
      if (isChecking) {
        return;
      }
      
      isChecking = true;
      checkCount++;
      
      fetch(window.location.href + '?_=' + Date.now(), {
        method: 'GET',
        cache: 'no-cache',
        headers: {
          'Cache-Control': 'no-cache, no-store, must-revalidate',
          'Pragma': 'no-cache',
          'Expires': '0'
        }
      }).then(function(response) {
        return response.text();
      }).then(function(html) {
        const currentHash = generatePageHash(html);
        
        if (!initialized) {
          lastPageHash = currentHash;
          initialized = true;
          console.log('ğŸ Page hash initialized:', currentHash.substring(0, 8) + '...', 'for', currentUrl);
          stableCount = 0;
        } else if (currentHash !== lastPageHash) {
          console.log('âœ¨ Page content changed!');
          console.log('ğŸ“Š Hash changed from', lastPageHash.substring(0, 8) + '...', 'to', currentHash.substring(0, 8) + '...');
          console.log('ğŸ”„ Reloading page in 1000ms...');
          
          // æ¸…ç†å®šæ—¶å™¨
          if (checkInterval) {
            clearInterval(checkInterval);
          }
          
          // é‡ç½®çŠ¶æ€ï¼Œå‡†å¤‡é‡æ–°åŠ è½½
          initialized = false;
          lastPageHash = null;
          isChecking = false;
          
          setTimeout(function() {
            window.location.reload();
          }, 1000);
          return;
        } else {
          stableCount++;
          if (stableCount <= 2 || stableCount % 8 === 0) {
            console.log('ğŸ“‹ Check #' + checkCount + ' - No changes detected (stable: ' + stableCount + ')');
          }
        }
        
        isChecking = false;
      }).catch(function(error) {
        console.log('âŒ Check #' + checkCount + ' failed:', error.message);
        isChecking = false;
      });
    }
    
    // Pjax/é¡µé¢è·³è½¬ç›‘å¬
    function setupNavigationListeners() {
      // ç›‘å¬ Pjax äº‹ä»¶
      document.addEventListener('pjax:success', function() {
        console.log('ğŸš€ Pjax navigation detected');
        urlChangeDetected = true;
        setTimeout(function() {
          checkUrlChange();
        }, 500);
      });
      
      // ç›‘å¬ History API å˜åŒ–
      const originalPushState = history.pushState;
      const originalReplaceState = history.replaceState;
      
      history.pushState = function() {
        originalPushState.apply(history, arguments);
        setTimeout(checkUrlChange, 100);
      };
      
      history.replaceState = function() {
        originalReplaceState.apply(history, arguments);
        setTimeout(checkUrlChange, 100);
      };
      
      // ç›‘å¬ popstate äº‹ä»¶ï¼ˆæµè§ˆå™¨å‰è¿›/åé€€ï¼‰
      window.addEventListener('popstate', function() {
        console.log('â¬…ï¸ Browser navigation detected');
        setTimeout(checkUrlChange, 100);
      });
    }
    
    // åˆå§‹åŒ–
    function initialize() {
      setupNavigationListeners();
      
      // ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½åå¼€å§‹æ£€æŸ¥
      setTimeout(function() {
        checkForUpdates();
        
        // æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡æ›´æ–°
        checkInterval = setInterval(checkForUpdates, 5000);
        
        // é¡µé¢å¸è½½æ—¶æ¸…ç†
        window.addEventListener('beforeunload', function() {
          if (checkInterval) {
            clearInterval(checkInterval);
          }
        });
      }, 3000);
      
      // ç›‘å¬é¡µé¢ç„¦ç‚¹ï¼Œç”¨æˆ·å›åˆ°é¡µé¢æ—¶ç«‹å³æ£€æŸ¥
      window.addEventListener('focus', function() {
        if (initialized && !urlChangeDetected) {
          console.log('ğŸ‘ï¸ Page focused - checking for updates...');
          setTimeout(checkForUpdates, 800);
        }
      });
    }
    
    // å¯åŠ¨åˆå§‹åŒ–
    initialize();
    
    console.log('âœ… Smart Live Reload initialized');
    console.log('ğŸ’¡ Will check for content changes every 5 seconds');
    console.log('ğŸ¯ Only real content changes will trigger reload');
    console.log('ğŸ”— URL changes will be handled gracefully');
  }
})();
</script>

<script>
/* Service Worker æ³¨å†Œ - æå‡ç¼“å­˜æ€§èƒ½ */
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then(registration => {
        console.log('SW registered: ', registration);
      })
      .catch(registrationError => {
        console.log('SW registration failed: ', registrationError);
      });
  });
}

/* æŒä¹…åŒ–éŸ³ä¹æ’­æ”¾å™¨ - é¿å…Pjaxé‡ç½® */
(function() {
    'use strict';
    
    let musicPlayer = null;
    const MUSIC_PLAYER_ID = 'persistent-music-player';
    
    // åˆ›å»ºéŸ³ä¹æ’­æ”¾å™¨HTML
    function createMusicPlayer() {
        const playerHtml = `
            <div id="${MUSIC_PLAYER_ID}" class="persistent-music-player minimized">
                <div class="music-controls">
                    <button class="music-toggle-btn" onclick="toggleMusicPlayer()" title="ç‚¹å‡»åˆ‡æ¢æ’­æ”¾å™¨æ˜¾ç¤º/éšè—&#10;æ¡Œé¢ç«¯å³é”®å¼€å¯/å…³é—­æ—‹è½¬&#10;æ‰‹æœºç«¯é•¿æŒ‰2ç§’å¼€å¯/å…³é—­æ—‹è½¬">â™ª</button>
                    <button class="music-minimize-btn" onclick="minimizeMusicPlayer()" title="æœ€å°åŒ–">âˆ’</button>
                </div>
                <div class="music-iframe-container">
                    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" 
                            width="330" height="450" loading="lazy"
                            sandbox="allow-scripts allow-same-origin allow-popups allow-forms"
                            src="//music.163.com/outchain/player?type=0&id=6922474495&auto=0&height=430">
                    </iframe>
                </div>
            </div>
        `;
        return playerHtml;
    }
    
    // åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨
    function initMusicPlayer() {
        // å¦‚æœå·²å­˜åœ¨ï¼Œä¸é‡å¤åˆ›å»º
        if (document.getElementById(MUSIC_PLAYER_ID)) {
            return;
        }
        
        // åˆ›å»ºæ’­æ”¾å™¨å®¹å™¨
        const playerContainer = document.createElement('div');
        playerContainer.innerHTML = createMusicPlayer();
        
        // æ·»åŠ åˆ°bodyæœ«å°¾ï¼Œç¡®ä¿ä¸è¢«Pjaxå½±å“
        document.body.appendChild(playerContainer.firstElementChild);
        
        // ç¡®ä¿æ’­æ”¾å™¨ä¸ä¼šè¢«Pjaxæ›¿æ¢
        const player = document.getElementById(MUSIC_PLAYER_ID);
        if (player) {
            player.setAttribute('data-pjax-ignore', 'true');
            // æ’­æ”¾å™¨é»˜è®¤ä¸ºæœ€å°åŒ–çŠ¶æ€
            player.classList.add('minimized');
        }
    }
    
    // éŸ³ä¹å›¾æ ‡æ—‹è½¬æ§åˆ¶
    let musicIconRotating = false;
    let longPressTimer = null;
    
    // åˆ‡æ¢éŸ³ä¹å›¾æ ‡æ—‹è½¬çŠ¶æ€
    function toggleMusicRotation() {
        const toggleBtn = document.querySelector('.music-toggle-btn');
        if (!toggleBtn) return;
        
        musicIconRotating = !musicIconRotating;
        
        if (musicIconRotating) {
            toggleBtn.classList.add('rotating');
            localStorage.setItem('musicIconRotating', 'true');
        } else {
            toggleBtn.classList.remove('rotating');
            localStorage.setItem('musicIconRotating', 'false');
        }
    }
    
    // æ¢å¤éŸ³ä¹å›¾æ ‡æ—‹è½¬çŠ¶æ€
    function restoreMusicRotationState() {
        const toggleBtn = document.querySelector('.music-toggle-btn');
        if (!toggleBtn) return;
        
        const savedState = localStorage.getItem('musicIconRotating');
        if (savedState === 'true') {
            musicIconRotating = true;
            toggleBtn.classList.add('rotating');
        }
    }
    
    // æ·»åŠ éŸ³ä¹å›¾æ ‡äº¤äº’äº‹ä»¶
    function addMusicIconEvents() {
        const toggleBtn = document.querySelector('.music-toggle-btn');
        if (!toggleBtn) return;
        
        // æ¡Œé¢ç«¯å³é”®äº‹ä»¶
        toggleBtn.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            toggleMusicRotation();
        });
        
        // ç§»åŠ¨ç«¯é•¿æŒ‰äº‹ä»¶
        toggleBtn.addEventListener('touchstart', function(e) {
            longPressTimer = setTimeout(function() {
                toggleMusicRotation();
                // è§¦è§‰åé¦ˆï¼ˆå¦‚æœæ”¯æŒï¼‰
                if (navigator.vibrate) {
                    navigator.vibrate(50);
                }
            }, 2000);
        });
        
        toggleBtn.addEventListener('touchend', function(e) {
            if (longPressTimer) {
                clearTimeout(longPressTimer);
                longPressTimer = null;
            }
        });
        
        toggleBtn.addEventListener('touchmove', function(e) {
            if (longPressTimer) {
                clearTimeout(longPressTimer);
                longPressTimer = null;
            }
        });
        
        // æ¢å¤æ—‹è½¬çŠ¶æ€
        restoreMusicRotationState();
    }
    
    // åˆ‡æ¢æ’­æ”¾å™¨æ˜¾ç¤º/éšè—
    window.toggleMusicPlayer = function() {
        const player = document.getElementById(MUSIC_PLAYER_ID);
        if (!player) return;
        
        if (player.classList.contains('minimized')) {
            player.classList.remove('minimized');
            localStorage.setItem('musicPlayerMinimized', 'false');
        } else {
            player.classList.add('minimized');
            localStorage.setItem('musicPlayerMinimized', 'true');
        }
    };
    

    
    // æœ€å°åŒ–æ’­æ”¾å™¨
    window.minimizeMusicPlayer = function() {
        const player = document.getElementById(MUSIC_PLAYER_ID);
        if (!player) return;
        
        player.classList.add('minimized');
        localStorage.setItem('musicPlayerMinimized', 'true');
    };
    

    
    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            initMusicPlayer();
            setTimeout(addMusicIconEvents, 100);
        });
    } else {
        initMusicPlayer();
        setTimeout(addMusicIconEvents, 100);
    }
    
    // Pjaxé¡µé¢åˆ‡æ¢åé‡æ–°åˆå§‹åŒ–ï¼ˆå¦‚æœæ’­æ”¾å™¨è¢«æ„å¤–ç§»é™¤ï¼‰
    document.addEventListener('pjax:complete', function() {
        setTimeout(function() {
            const existingPlayer = document.getElementById(MUSIC_PLAYER_ID);
            if (!existingPlayer) {
                initMusicPlayer();
                setTimeout(addMusicIconEvents, 100);
            }
        }, 100);
    });
    
})();


</script>

<script>
/* Taboola å¹¿å‘Šè¿‡æ»¤è„šæœ¬ - åŠ¨æ€ç§»é™¤å¹¿å‘Šå…ƒç´  */
(function() {
  'use strict';
  
  console.log('ğŸš« å¯åŠ¨ Taboola å¹¿å‘Šè¿‡æ»¤å™¨...');
  
  // éœ€è¦è¿‡æ»¤çš„é€‰æ‹©å™¨
  const adSelectors = [
    '#taboola-livere',
    'div[id*="taboola"]',
    'div[class*="trc_related_container"]',
    'div[class*="tbl-trecs-container"]',
    'div[class*="trc_spotlight_widget"]',
    'div[data-placement-name*="1020_29982"]',
    'div[class*="trc_rbox_container"]',
    'div[class*="trc_rbox"]',
    'div[class*="thumbnails-b"]',
    'div[class*="trc-content-sponsored"]',
    'a[href*="taboola.com"]',
    'a[href*="popup.taboola.com"]',
    'figure[id*="taboola"]',
    'div[class*="videoCube"]',
    'div[class*="trc_spotlight_item"]',
    'div[data-item-syndicated="true"]',
    '[class*="taboola"]',
    '[id*="taboola"]',
    '[data-placement-name]',
    '.trc_related_container',
    '.tbl-trecs-container',
    '.trc_spotlight_widget',
    '.trc_elastic',
    '.trc_elastic_thumbnails-b'
  ];
  
  // ç§»é™¤å¹¿å‘Šå…ƒç´ çš„å‡½æ•°
  function removeAds() {
    let removedCount = 0;
    
    adSelectors.forEach(function(selector) {
      try {
        const elements = document.querySelectorAll(selector);
        elements.forEach(function(element) {
          if (element && element.parentNode) {
            element.parentNode.removeChild(element);
            removedCount++;
          }
        });
      } catch (error) {
        // å¿½ç•¥é€‰æ‹©å™¨é”™è¯¯
      }
    });
    
    // é¢å¤–æ£€æŸ¥åŒ…å«ç‰¹å®šæ–‡æœ¬çš„å…ƒç´ 
    const textPatterns = ['æ‚¨å¯èƒ½å–œæ­¡çš„å…§å®¹', 'by Taboola', 'Taboola'];
    textPatterns.forEach(function(pattern) {
      try {
        const walker = document.createTreeWalker(
          document.body || document.documentElement,
          NodeFilter.SHOW_TEXT,
          null,
          false
        );
        
        const textNodes = [];
        let node;
        while (node = walker.nextNode()) {
          if (node.textContent && node.textContent.includes(pattern)) {
            textNodes.push(node);
          }
        }
        
        textNodes.forEach(function(textNode) {
          let parentElement = textNode.parentElement;
          // å‘ä¸ŠæŸ¥æ‰¾å¯èƒ½çš„å¹¿å‘Šå®¹å™¨
          while (parentElement && parentElement !== document.body) {
            if (parentElement.className && 
                (parentElement.className.includes('trc_') || 
                 parentElement.className.includes('taboola') ||
                 (parentElement.id && parentElement.id.includes('taboola')))) {
              if (parentElement.parentNode) {
                parentElement.parentNode.removeChild(parentElement);
                removedCount++;
                break;
              }
            }
            parentElement = parentElement.parentElement;
          }
        });
      } catch (error) {
        // å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­å¤„ç†å…¶ä»–æ¨¡å¼
      }
    });
    
    if (removedCount > 0) {
      console.log('ğŸ—‘ï¸  æˆåŠŸç§»é™¤', removedCount, 'ä¸ªå¹¿å‘Šå…ƒç´ ');
    }
    
    return removedCount;
  }
  
  // ç«‹å³æ‰§è¡Œä¸€æ¬¡
  setTimeout(removeAds, 1000);
  
  // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(removeAds, 500);
    });
  } else {
    setTimeout(removeAds, 500);
  }
  
  // çª—å£åŠ è½½å®Œæˆåæ‰§è¡Œ
  window.addEventListener('load', function() {
    setTimeout(removeAds, 1000);
  });
  
  // ä½¿ç”¨ MutationObserver ç›‘æ§ DOM å˜åŒ–
  if (typeof MutationObserver !== 'undefined') {
    const observer = new MutationObserver(function(mutations) {
      let shouldCheck = false;
      
      mutations.forEach(function(mutation) {
        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
          // æ£€æŸ¥æ˜¯å¦æœ‰æ–°æ·»åŠ çš„èŠ‚ç‚¹åŒ…å«å¹¿å‘Šç›¸å…³çš„ç±»åæˆ–ID
          for (let i = 0; i < mutation.addedNodes.length; i++) {
            const node = mutation.addedNodes[i];
            if (node.nodeType === Node.ELEMENT_NODE) {
              const nodeStr = node.outerHTML || '';
              if (nodeStr.includes('taboola') || 
                  nodeStr.includes('trc_') || 
                  nodeStr.includes('æ‚¨å¯èƒ½å–œæ­¡çš„å…§å®¹')) {
                shouldCheck = true;
                break;
              }
            }
          }
        }
      });
      
      if (shouldCheck) {
        setTimeout(removeAds, 100);
      }
    });
    
    // å¼€å§‹è§‚å¯Ÿ
    if (document.body) {
      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
    } else {
      // å¦‚æœ body è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œç­‰å¾…ä¸€ä¸‹
      setTimeout(function() {
        if (document.body) {
          observer.observe(document.body, {
            childList: true,
            subtree: true
          });
        }
      }, 100);
    }
    
    console.log('ğŸ‘ï¸  DOM å˜åŒ–ç›‘æ§å™¨å·²å¯åŠ¨');
  }
  
  // å®šæœŸæ£€æŸ¥ï¼ˆæ¯5ç§’ï¼‰
  setInterval(function() {
    removeAds();
  }, 5000);
  
  // Pjax é¡µé¢åˆ‡æ¢åä¹Ÿæ‰§è¡Œå¹¿å‘Šè¿‡æ»¤
  document.addEventListener('pjax:success', function() {
    setTimeout(removeAds, 500);
  });
  
  console.log('âœ… Taboola å¹¿å‘Šè¿‡æ»¤å™¨åˆå§‹åŒ–å®Œæˆ');
})();
</script>
